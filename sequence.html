<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>javascript공부</title>
    <!-- jquery -->
    <script src="./mypracticeJS/jquery-3.6.1.min.js"></script>
    <!-- gsap -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <!-- 스크롤매직 -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TweenMax.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/debug.addIndicators.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/debug.addIndicators.min.js"></script>

<style>
</style>
</head>
<body>
    <div style="height: 2000px;"></div>
    <div class="wrap">

        <div class="spacer s0" id="trigger" class="pinned">트리거
        </div>
        <img class="avata" src="./MPimg/sequence/sequence_1.jpg"><br>
    </div>
</body>
<script>
    // define images 이미지정의

    // for문으로 이미지 배열 생성

    const $avataImgSqc = new Array();

    for (let i = 1; i < 175; i++) {
        $avataImgSqc.push("./MPimg/sequence/sequence_" + i + ".jpg");
    }

    function preloading(preImgs) {
    let imgTotal = preImgs.length;
    for (let i = 0; i < imgTotal; i++) {
        let img = new Image();
        img.src = preImgs[i];
    }
    preloading($avataImgSqc)
}

const $img = { crntImg: 0 },
      $imgTag = document.querySelector('.avata');

let $tween_avata = TweenMax.to($img, 1, {
    crntImg: $avataImgSqc.length - 1,
    roundProps: 'crntImg',
    immediateRender: true,
    onUpdate: function () {
        $imgTag.setAttribute('src', $avataImgSqc[$img.crntImg])
    }
});

new ScrollMagic.Scene({
    duration: 5000,
    triggerElement: '#trigger',
    triggerHook: 0
})
    .setTween($tween_avata)
    .setPin('.pinned')
    .addTo($controller);
</script>
</html>